### 性能优化的场景

谷歌v8引擎有即时编译的系统，对于多次运行的代码会直接编译成机器码进行缓存


<<<<<<< HEAD
**缓存是优化网站性能最有效的手段，核心原则是小**


重要手段：(部分可参考雅虎军规的总结)

1. 减少dom的数量，优化css
2. 压缩合并js，css
3. cdn，针对多个js文件在同域名下请求数量的限制，cookie会在同域名下传递，如果将图片资源放到其他域名下会减少资源开销。
4. http2，keep-alive服务端设置，gzip
5. 判断用户的网络类型
    - 冷启动： 用户第一次访问应用，加上网速过慢，可以返回一个简版，只有少量资源的版本。
    - 判断网络类型进行分流：

      - 1. 利用html5提供的api

        ```navigator.connection```
        ```
        NetworkInformation {
          downlink: 0.35,
          effectiveType: "2g", // 2g网络
          onchange: null,
          rtt: 1800, // 一次请求往返时间
          saveData: false
        } 
        ```
      - 2. 纯图片请求测速

           前端src发送一张1kb的图片，得到来回的时间差，算出网速。

      - 3. 多普勒测速
            纯图片无法测出纯的rtt时间，因为中间还要经过dns解析，tcp连接等。
6. 离线缓存

    - localstorage同步读取，大小为2.5M，如果不满足可以用iframe进行扩容
    








=======
### 缩短白屏时间的策略
1. 通过内联 JavaScript、内联 CSS 来移除这两种类型的⽂件下载，这样获取到 HTML ⽂件之后就可 以直接开始渲染流程了
2. 但并不是所有的场合都适合内联，那么还可以尽量减少⽂件⼤⼩，⽐如通过 webpack 等⼯具移除 ⼀些不必要的注释，并压缩 JavaScript ⽂件 
3. 可以将⼀些不需要在解析 HTML 阶段使⽤的 JavaScript 标记上 sync 或者 defer。 
4. 对于⼤的 CSS ⽂件，可以通过媒体查询属性，将其拆分为多个不同⽤途的 CSS ⽂件，这样只有在 特定的场景下才会加载特定的 CSS ⽂件。
>>>>>>> aad82df18c6a6d0af670a52177a01ff3452ed271
