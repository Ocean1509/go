HTTPS原理个人总结

两个重要核心，对称加密和非堆成加密，密钥的传输是通过非对称加密，内容的传输是对称加密。非对称加密更加耗费性能。

服务端会先花钱和第三方CA机构去申请数字证书，服务端先把自己的公钥和服务端的信息其他有用信息，利用Hash算法生成一个消息摘要。如果数据一旦有一点点变化，生产的消息摘要就会发生巨变。有了这个消息摘要后，利用第三方CA机构的私钥加密，生成数字签名。接着将数字签名和一开始的公钥和其他信息组合成一个数字证书放在服务器上。

客户端发起https请求前，会先请求服务器返回它的数字证书。客户端拿到数字证书后，本地浏览器有内嵌的CA机构的公钥，这时候会做两个事情，数字证书由两部分组成，一部分是数字签名，另一部分是服务器的公钥和有用信息的组合。首先根据信息提供的Hash算法对服务器公钥和信息组合进行hash运算，得到消息摘要。然后利用内嵌的CA机构公钥去解密数字签名，同样得到消息摘要。对比两个消息摘要。如果相同则说明这个公钥是由服务端下发过来的，也是安全。

有了这个公钥，客户端随机生成一个随机数作为后续传输信息的密钥。用刚得到的公钥进行加密，返回给服务端。服务端利用自己的私钥去解密，得到客户端约定好的密钥。之后客户端和服务端利用这个随机生成的密钥进行对称加密通信